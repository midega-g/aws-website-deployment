# AWS Website Deployment Challenge

A comprehensive guide to deploying websites on AWS using two different approaches: manual setup for learning AWS fundamentals, and modern automated deployment for production workflows.

## What You'll Learn

This challenge teaches you how to build and deploy a personal website using AWS services. You'll learn:

- **AWS Fundamentals**: S3, CloudFront, IAM, Lambda, SNS
- **Security Best Practices**: Private buckets, proper permissions, HTTPS
- **Modern Development Workflow**: Git, GitHub, automated deployments
- **Serverless Architecture**: Event-driven functions, pay-per-use computing
- **Cost Management**: Free Tier optimization, budget monitoring

## Prerequisites

- ***[Required]***:
  - [AWS Account](https://aws.amazon.com/account/)
  - [Git](https://git-scm.com/downloads) installed
  - Text editor ([VS Code](https://code.visualstudio.com/download) recommended)
  - [GitHub](https://github.com/) account
  - Email address for notifications
  - Mobile authenticator app of your choice
- ***[Optional]***:
  - *Windows users only:*
    - [Windows Subsystem for Linux (WSL)](https://learn.microsoft.com/en-us/windows/wsl/install)
  - [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html) installed
  - [Terraform CLI](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli) installed
  - Basic HTML/CSS knowledge

## Getting Started

1. Clone the repository:

   ```bash
   git clone https://github.com/midega-g/aws-website-deployment.git
   cd aws-website-deployment
   code .
   ```

2. Make changes to photos and names as needed

## Initial AWS Account Setup

Before deploying with either approach, complete these foundational steps:

### Create IAM User

⚠️ **Important**: Avoid setting up "IAM Identity Center" as it might upgrade your account out of the Free Tier.

1. Go to IAM in AWS Console
2. Click "Users" → "Create user"
3. Enter username and check "Provide user access to the AWS Management Console"
4. Select "I want to create an IAM user" (not Identity Center)
5. Choose "Autogenerated password"
6. Create "Administrators" group with "AdministratorAccess" policy
7. Add user to the group
8. Save your credentials (console sign-in URL, username, password)

### Enable Billing Access

1. Go to Account settings (while logged in as root)
2. Find "IAM User and Role Access to Billing Information"
3. Click "Edit" and check "Activate IAM Access"
4. Sign out and sign in with your IAM user

### Setup Budget

1. Go to "Billing and Cost Management" → "Budgets"
2. Click "Create budget" → "Use a template (simplified)"
3. Choose "Monthly cost budget"
4. Set budget name and amount ($5.00)
5. Enter your email for alerts

---

# Part 1: Manual Deployment (Learning AWS Fundamentals)

This approach teaches you AWS services by manually configuring each component. Perfect for understanding how AWS works under the hood.

## Step 1: Create S3 Bucket

1. Navigate to S3 in AWS Console
2. Click "Create bucket"
3. Choose unique name (e.g., "my-first-website-[your-name]")
4. Keep all "Block Public Access" settings checked ✅
5. Create bucket with default settings

### Upload Your Photo

1. Open your bucket
2. Click "Upload" → "Add files"
3. Select a photo (under 5MB, JPG/PNG format)
4. Upload with default settings

### Organize Bucket Structure

1. Create "images" folder
2. Move your photo to the images folder

## Step 2: Customize Website Content

### Update index.html

1. Replace "Your Name" with your actual name
2. Update AWS Builder Center profile link with your alias
3. Customize the fun facts section
4. Update footer with your name
5. (Optional) Add your profile photo

### Preview Locally

Open `index.html` in your browser to test before uploading.

### Upload Website Files to S3

1. Go to your S3 bucket
2. Verify "Block all public access" is On
3. Upload these files:
   - `index.html`
   - `style.css`
   - Your profile photo

### Test Security

Try accessing the Object URL - you should see "Access Denied" (this is correct).

## Step 3: Setup CloudFront Distribution

### Create Distribution

1. Go to CloudFront in AWS Console
2. Click "Create CloudFront distribution"
3. Name your distribution
4. Select "Single website or app"
5. Skip custom domain setup
6. Configure origin:
   - Origin type: "Amazon S3"
   - Select your S3 bucket
   - Leave "Allow private S3 bucket access to CloudFront" checked
7. Use recommended settings
8. Skip security protections for learning purposes
9. Create distribution

### Configure Homepage

1. Edit distribution settings
2. Set "Default root object" to `index.html`
3. Save changes

### Test Your Website

1. Wait for deployment (5-15 minutes)
2. Copy your CloudFront domain (e.g., d1234567890123.cloudfront.net)
3. Visit `https://your-distribution-domain.cloudfront.net`
4. Verify S3 direct access is still blocked

---

# Part 2: Modern Deployment (Production Workflow)

This approach uses modern development practices with automated deployment. Recommended for ongoing development and production use.

## Step 1: Modern Deployment with GitHub + Amplify

### Understanding Git and GitHub

- **Git**: Version control system that tracks changes to your files
- **GitHub**: Cloud storage for Git repositories with collaboration features
- **Benefits**: Version history, backup, collaboration, automated deployments

### Setup GitHub Repository

1. Create GitHub account at [github.com](https://github.com)
2. Create new repository:
   - Name: `my-builder-challenge-website`
   - Description: "My Builder Challenge website built on AWS"
   - Add README file
3. Upload your website files:
   - Click "Add file" → "Upload files"
   - Upload `index.html`, `style.css`, and profile photo
   - Commit with message: "Add initial website files"

### Deploy with AWS Amplify

1. Go to AWS Amplify console
2. Click "Deploy an app" → Select "GitHub"
3. Authorize AWS Amplify and select your repository
4. Configure app:
   - App name: `my-builder-challenge-website`
   - Branch: `main`
   - Use default build settings
5. Deploy and get your Amplify URL

### Test Automatic Deployments

1. Edit a file in GitHub (click pencil icon)
2. Make a small change and commit
3. Watch Amplify automatically deploy your changes
4. Verify changes appear on your live site

### Clean Up Manual Setup

Once Amplify is working:

1. **Delete CloudFront distribution**:
   - Disable distribution first
   - Wait for "Disabled" status
   - Then delete
2. **Clean up S3 bucket** (optional):
   - Empty bucket contents
   - Delete bucket

## Step 2: Add Contact Form with Serverless Backend

### Understanding Serverless Architecture

- **Client-Server Pattern**: Browser JavaScript → Server processes → Response
- **Serverless Functions**: Code runs only when needed (event-driven)
- **Benefits**: No server management, pay-per-use, automatic scaling

### Setup Email Notifications (SNS)

1. Go to SNS console
2. Create topic:
   - Name: `contact-form-notifications`
   - Type: Standard
3. Create subscription:
   - Protocol: Email
   - Endpoint: Your email address
4. Confirm subscription via email
5. Save the Topic ARN for later use

### Configure Permissions (IAM)

1. **Create Policy**:
   - Go to IAM → Policies → Create policy
   - Service: SNS
   - Actions: Publish
   - Resources: Specific (use your Topic ARN)
   - Name: `ContactFormSNSPublish`

2. **Create Role**:
   - Go to IAM → Roles → Create role
   - Trusted entity: AWS service (Lambda)
   - Attach policies:
     - `AWSLambdaBasicExecutionRole`
     - `ContactFormSNSPublish`
   - Name: `contact-form-lambda-role`

### Create Lambda Function

1. Go to Lambda console
2. Create function:
   - Name: `contact-form-function`
   - Runtime: Python 3.13
   - Execution role: Use existing role (`contact-form-lambda-role`)
3. Replace default code with contact form processing code
4. Update `YOUR_TOPIC_ARN_HERE` with your actual Topic ARN
5. Deploy the function

### Create Function URL

1. In Lambda function → Configuration → Function URL
2. Create function URL:
   - Auth type: NONE
   - Configure CORS:
     - Allow origin: Your Amplify domain
     - Allow headers: Content-Type
     - Allow methods: POST
3. Save and copy the Function URL

### Add Contact Form to Website

**Edit via GitHub:**

- Option 1: Click pencil icon on any file
- Option 2: Press `.` key in repository or change `github.com` to `github.dev`

**Add HTML form** (before closing `</main>` tag):

```html
<section class="contact-section">
    <h2>Get In Touch</h2>
    <form id="contact-form">
        <input type="text" id="name" placeholder="Your Name" required>
        <input type="email" id="email" placeholder="Your Email" required>
        <textarea id="message" placeholder="Your Message" required></textarea>
        <button type="submit">Send Message</button>
    </form>
    <div id="form-status"></div>
</section>
```

**Add JavaScript** (before closing `</body>` tag):

```html
<script>
// Add contact form submission code here
// Replace FUNCTION_URL with your Lambda Function URL
</script>
```

**Update CSS** for form styling

**Deploy changes:**

1. Commit with message: "Add contact form"
2. Amplify automatically deploys in 2-3 minutes

### Test Contact Form

1. Visit your Amplify website
2. Fill out and submit the contact form
3. Verify:
   - Success message appears
   - Email notification received
   - Form clears after submission

### Troubleshooting Contact Form

- **No email received**: Check spam folder, verify SNS subscription, check Topic ARN
- **Form error**: Check browser console (F12), verify Function URL
- **Still issues**: Check Lambda CloudWatch logs for errors

---

# Additional Resources

## AWS CLI Commands

### Upload Images via CLI

```bash
aws s3 cp /path/to/local/folder s3://your-bucket-name/images/ --recursive
```

**Example:**

```bash
aws s3 cp \
    images/ \
    s3://midega-website-challenge-bucket/images/ \
    --recursive
```

### Script Management

Make scripts executable:

```bash
chmod +x scripts/deploy.sh
chmod +x scripts/destroy.sh
```

Run scripts:

```bash
./scripts/deploy.sh
./scripts/destroy.sh
```

## Security Features

- **Private S3 Bucket**: Files are not publicly accessible
- **Origin Access Control (OAC)**: CloudFront has special access to private bucket
- **HTTPS**: Secure content delivery worldwide
- **Budget Alerts**: Monitor spending to stay within Free Tier

## Cost Considerations

- **S3 Storage**: ~$0.023 per GB/month
- **CloudFront**: Free tier includes 1TB data transfer
- **Free Tier Credits**: $100 initial + up to $100 more through activities
- **Data Transfer**: First 100 GB/month always free

## Troubleshooting

- **Access Denied on S3**: This is expected - files should only be accessible via CloudFront
- **CloudFront not working**: Wait for deployment to complete (up to 15 minutes)
- **Budget alerts**: Check AWS Cost and Usage dashboard
- **Amplify deployment fails**: Check build logs in Amplify console
- **GitHub authorization issues**: Re-authorize AWS Amplify in GitHub settings

## Project Structure

```txt
website-challenge/
├── index.html          # Main webpage with contact form
├── style.css          # Styling including form styles
├── images/            # Image assets
├── scripts/           # Deployment scripts
└── README.md          # This file
```

## Architecture Overview

**Modern Setup (Recommended):**

- **GitHub**: Code storage and version control
- **AWS Amplify**: Automated deployment and hosting
- **AWS Lambda**: Serverless contact form processing
- **Amazon SNS**: Email notifications
- **CloudFront**: Global content delivery (managed by Amplify)

**Manual Setup (Learning purposes):**

- **Amazon S3**: Static file storage
- **CloudFront**: Global content delivery
- **Manual uploads**: File management via AWS Console
